{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function fetchData(query, currentPage) {\n  const API_KEY = '42152818-0d69fd49112a74751654c42bc';\n  const url = 'https://pixabay.com/api/';\n\n  const params = {\n    key: API_KEY,\n    lang: 'en',\n    order: 'popular',\n    q: query,\n    per_page: 15,\n    page: currentPage,\n  };\n  const res = await axios.get(url, { params });\n  return res.data;\n}","function imgTemplate(hit) {\n  const {\n    largeImageURL,\n    webformatURL,\n    tags,\n    likes,\n    views,\n    comments,\n    downloads,\n  } = hit;\n  return `<li class=\"list-item\"><a href=\"${largeImageURL}\">\n          <img class=\"item-img\" src=\"${webformatURL}\" alt=\"${tags}\" ></a><div class=\"container\"><p><b>Likes: </b><br>${likes}</p><p><b>Views: </b><br>${views}</p><p><b>Comments: </b><br>${comments}</p><p><b>Downloads: </b><br>${downloads}</p>\n          </div></li>`;\n}\n\nexport function imgsTemplate(hits) {\n  return hits.map(imgTemplate).join('');\n}","import SimpleLightbox from 'simplelightbox';\nimport iziToast from 'izitoast';\nimport { searchImages } from 'pixabay-api';\n\nimport 'izitoast/dist/css/iziToast.min.css';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { fetchData } from './js/pixabay-api';\nimport { imgsTemplate } from './js/render-functions';\n\nconst refs = {\n  formEl: document.querySelector('form'),\n  inputEl: document.querySelector('input'),\n  listEl: document.querySelector('ul'),\n  loaderEl: document.querySelector('.loader'),\n  btnLoad: document.querySelector('.btn-load'),\n};\nhideLoadBtn();\n\nlet query;\nlet page;\nlet maxPage;\n\nrefs.formEl.addEventListener('submit', onFormSubmit);\nrefs.btnLoad.addEventListener('click', onLoadMoreClick);\n\nasync function onFormSubmit(e) {\n  e.preventDefault();\n  query = refs.inputEl.value.trim();\n  page = 1;\n\n  if (!query) {\n    showError('Empty field');\n    return;\n  }\n  showLoader();\n\n  try {\n    const data = await fetchData(query, page);\n    if (data.totalHits === 0) {\n      showError(\n        'Sorry, there are no images matching your search query. Please try again!'\n      );\n    }\n    maxPage = Math.ceil(data.totalHits / 15);\n    refs.listEl.innerHTML = '';\n    renderImgs(data.hits);\n    showLightBox();\n  } catch (err) {\n    showError(err);\n  }\n\n  hideLoader();\n  checkBtnVisibleStatus();\n  e.target.reset();\n}\n\nasync function onLoadMoreClick() {\n  page += 1;\n  showLoader();\n  const data = await fetchData(query, page);\n  renderImgs(data.hits);\n  showLightBox();\n  hideLoader();\n  checkBtnVisibleStatus();\n\n  const height = refs.listEl.firstElementChild.getBoundingClientRect().height;\n  scrollBy({\n    behavior: 'smooth',\n    top: height * 2,\n  });\n}\n\nfunction renderImgs(hits) {\n  const markup = imgsTemplate(hits);\n  refs.listEl.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction showLoader() {\n  refs.loaderEl.style.display = 'flex';\n}\nfunction hideLoader() {\n  refs.loaderEl.style.display = 'none';\n}\n\nfunction showLightBox() {\n  const lightbox = new SimpleLightbox('.gallery a', {\n    captions: true,\n    captionSelector: 'img',\n    captionPosition: 'bottom',\n    captionsData: 'alt',\n  });\n  lightbox.on('show.simplelightbox');\n  lightbox.refresh();\n}\n\nfunction showError(msg) {\n  iziToast.error({\n    title: 'Error',\n    message: msg,\n  });\n}\n\nfunction showLoadBtn() {\n  refs.btnLoad.classList.remove('hidden');\n}\nfunction hideLoadBtn() {\n  refs.btnLoad.classList.add('hidden');\n}\n\nfunction checkBtnVisibleStatus() {\n  if (page >= maxPage) {\n    hideLoadBtn();\n    showError(\"We're sorry, but you've reached the end of search results.\");\n  } else {\n    showLoadBtn();\n  }\n}"],"names":["fetchData","query","currentPage","API_KEY","url","params","axios","imgTemplate","hit","largeImageURL","webformatURL","tags","likes","views","comments","downloads","imgsTemplate","hits","refs","hideLoadBtn","page","maxPage","onFormSubmit","onLoadMoreClick","e","showError","showLoader","data","renderImgs","showLightBox","err","hideLoader","checkBtnVisibleStatus","height","markup","lightbox","SimpleLightbox","msg","iziToast","showLoadBtn"],"mappings":"owBAEO,eAAeA,EAAUC,EAAOC,EAAa,CAClD,MAAMC,EAAU,qCACVC,EAAM,2BAENC,EAAS,CACb,IAAKF,EACL,KAAM,KACN,MAAO,UACP,EAAGF,EACH,SAAU,GACV,KAAMC,CACV,EAEE,OADY,MAAMI,EAAM,IAAIF,EAAK,CAAE,OAAAC,CAAM,CAAE,GAChC,IACb,CChBA,SAASE,EAAYC,EAAK,CACxB,KAAM,CACJ,cAAAC,EACA,aAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACD,EAAGP,EACJ,MAAO,kCAAkCC,CAAa;AAAA,uCACjBC,CAAY,UAAUC,CAAI,sDAAsDC,CAAK,4BAA4BC,CAAK,+BAA+BC,CAAQ,gCAAgCC,CAAS;AAAA,sBAE7O,CAEO,SAASC,EAAaC,EAAM,CACjC,OAAOA,EAAK,IAAIV,CAAW,EAAE,KAAK,EAAE,CACtC,CCPA,MAAMW,EAAO,CACX,OAAQ,SAAS,cAAc,MAAM,EACrC,QAAS,SAAS,cAAc,OAAO,EACvC,OAAQ,SAAS,cAAc,IAAI,EACnC,SAAU,SAAS,cAAc,SAAS,EAC1C,QAAS,SAAS,cAAc,WAAW,CAC7C,EACAC,IAEA,IAAIlB,EACAmB,EACAC,EAEJH,EAAK,OAAO,iBAAiB,SAAUI,CAAY,EACnDJ,EAAK,QAAQ,iBAAiB,QAASK,CAAe,EAEtD,eAAeD,EAAaE,EAAG,CAK7B,GAJAA,EAAE,eAAc,EAChBvB,EAAQiB,EAAK,QAAQ,MAAM,KAAI,EAC/BE,EAAO,EAEH,CAACnB,EAAO,CACVwB,EAAU,aAAa,EACvB,MACD,CACDC,IAEA,GAAI,CACF,MAAMC,EAAO,MAAM3B,EAAUC,EAAOmB,CAAI,EACpCO,EAAK,YAAc,GACrBF,EACE,0EACR,EAEIJ,EAAU,KAAK,KAAKM,EAAK,UAAY,EAAE,EACvCT,EAAK,OAAO,UAAY,GACxBU,EAAWD,EAAK,IAAI,EACpBE,GACD,OAAQC,EAAK,CACZL,EAAUK,CAAG,CACd,CAEDC,IACAC,IACAR,EAAE,OAAO,OACX,CAEA,eAAeD,GAAkB,CAC/BH,GAAQ,EACRM,IACA,MAAMC,EAAO,MAAM3B,EAAUC,EAAOmB,CAAI,EACxCQ,EAAWD,EAAK,IAAI,EACpBE,IACAE,IACAC,IAEA,MAAMC,EAASf,EAAK,OAAO,kBAAkB,sBAAuB,EAAC,OACrE,SAAS,CACP,SAAU,SACV,IAAKe,EAAS,CAClB,CAAG,CACH,CAEA,SAASL,EAAWX,EAAM,CACxB,MAAMiB,EAASlB,EAAaC,CAAI,EAChCC,EAAK,OAAO,mBAAmB,YAAagB,CAAM,CACpD,CAEA,SAASR,GAAa,CACpBR,EAAK,SAAS,MAAM,QAAU,MAChC,CACA,SAASa,GAAa,CACpBb,EAAK,SAAS,MAAM,QAAU,MAChC,CAEA,SAASW,GAAe,CACtB,MAAMM,EAAW,IAAIC,EAAe,aAAc,CAChD,SAAU,GACV,gBAAiB,MACjB,gBAAiB,SACjB,aAAc,KAClB,CAAG,EACDD,EAAS,GAAG,qBAAqB,EACjCA,EAAS,QAAO,CAClB,CAEA,SAASV,EAAUY,EAAK,CACtBC,EAAS,MAAM,CACb,MAAO,QACP,QAASD,CACb,CAAG,CACH,CAEA,SAASE,GAAc,CACrBrB,EAAK,QAAQ,UAAU,OAAO,QAAQ,CACxC,CACA,SAASC,GAAc,CACrBD,EAAK,QAAQ,UAAU,IAAI,QAAQ,CACrC,CAEA,SAASc,GAAwB,CAC3BZ,GAAQC,GACVF,IACAM,EAAU,4DAA4D,GAEtEc,GAEJ"}